{% load static %}

{% with object.comments.count as total_comments %}
    <h2>
        Комментариев {{ total_comments }}
    </h2>
{% endwith %}



{% if user.is_authenticated %}
    {% include 'core/include/form_comment.html' with nickname=user.username element=object %}
{% else %}
    Войдите, чтобы оставить комментарий
{% endif %}

{% for comment in comments %}
    <div class="card post_list">
        <div class="card-header">
            <img src="{{ comment.author.user_profile.avatar.url }}" class="rounded-circle float-left" width="50"
                 height="50">


            <a href="{{ comment.author.user_profile.get_absolute_url }}" class="post_header">
                {{ comment.author }}
            </a>
        </div>
        <div class="card-body">
            <p class="card-text">{{ comment.body|linebreaks }}</p>
        </div>
        <div class="card-footer text-muted">
            Отправлено {{ comment.created|date:"SHORT_DATE_FORMAT" }} в {{ comment.created|time:"H:i" }}, Автор: <a
                href="{{ comment.author.user_profile.get_absolute_url }}">{{ comment.author }}</a>



            <button data-id="{{ comment.id }}" data-type="comment" data-action="dislike" class="p-0 btn btn-sm float-right">
                <img src="{% static "img/svg/hand-thumbs-down.svg" %}">
                <span data-count="dislike" title="Не нравится"
                      class="font-weight-bold">{{ comment.votes.dislikes.count }}</span>

            </button>

                        <button data-id="{{ comment.id }}" data-type="comment" data-action="like" class="p-0 btn btn-sm float-right">
                <img src="{% static "img/svg/hand-thumbs-up.svg" %}">
                <span data-count="like" title="Нравится"
                      class="font-weight-bold">{{ comment.votes.likes.count }}</span>

            </button>

        </div>
    </div>

{% empty %}
    <p>Пока никто не оставил комментарий. Будьте первым!</p>
{% endfor %}

{% if object.comments.count > 2 %}
    {% include "core/include/pagination.html" with page=comments %}
{% endif %}
